{
  "name": "xdomain",
  "version": "0.7.3",
  "description": "A pure JavaScript CORS alternative",
  "browser": "dist/xdomain.js",
  "repository": {
    "type": "git",
    "url": "git+https://github.com/jpillora/xdomain.git"
  },
  "keywords": [
    "cors",
    "ie8",
    "polyfill"
  ],
  "author": {
    "name": "Jaime Pillora",
    "email": "dev@jpillora.com"
  },
  "license": "MIT",
  "readme": "# XDomain\n\n<a href=\"https://twitter.com/intent/tweet?hashtags=xdomain&original_referer=http%3A%2F%2Fgithub.com%2F&text=XDomain+-+A+pure+JavaScript+CORS+alternative&tw_p=tweetbutton&url=https%3A%2F%2Fgithub.com%2Fjpillora%2Fxdomain\" target=\"_blank\">\n  <img src=\"http://jpillora.com/github-twitter-button/img/tweet.png\"></img>\n</a>\n\n## Summary\n\nA pure JavaScript CORS alternative. No server configuration required - \njust add a `proxy.html` on the domain you wish to communicate with. This\nlibrary utilizes [XHook](http://jpillora.com/xhook) to hook all XHR, so XDomain\nwill work seamlessly with any library.\n\n## Features\n\n* Simple\n* Library Agnostic\n  * With [jQuery](http://jpillora.com/xdomain)  `$.ajax` (and subsequently `$.get`, `$.post`)\n  * With [Angular](http://jpillora.com/xdomain/example/angular) `$http` service\n* Cross domain XHR just magically works\n  * No need to modify the server code\n  * No need to use IE's silly [XDomainRequest Object](http://msdn.microsoft.com/en-us/library/ie/cc288060.aspx)\n* Easy XHR access to file servers:\n  * [Amazon](http://jpillora.com/xdomain)\n  * [Dropbox](http://jpillora.com/xdomain/example/dropbox)\n* Includes [XHook](http://jpillora.com/xhook) and its [features](https://github.com/jpillora/xhook#features)\n* `proxy.html` files (slaves) may:\n  * White-list domains\n  * White-list paths using regular expressions (e.g. only allow API calls: `/^\\/api/`)\n* Highly [performant](http://jpillora.com/xdomain/example/performance/)\n* Seamless integration with [FormData](http://jpillora.com/xdomain/example/formdata/)\n* Supports [RequiresJS](http://jpillora.com/xdomain/example/requirejs) and [Browserify](http://jpillora.com/xdomain/example/browserify)\n\n## Download\n\n* Development [xdomain.js](https://jpillora.com/xdomain/dist/xdomain.js) 27KB\n* Production [xdomain.min.js](https://jpillora.com/xdomain/dist/xdomain.min.js) 12KB (5.16KB Gzip)\n* CDN\n\n  * Latest version is `0.7.3`, though you can change to any [release tag](https://github.com/jpillora/xdomain/releases)\n\n  ``` html\n  <script src=\"//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js\"></script>\n  ```\n\n## Live Demos\n\n* [Simple GET from S3](http://jpillora.com/xdomain) \n\n* [XHR from file:// or data://](http://jpillora.com/xdomain/example/datauri/data-uri.html) \n\n* [Serverless S3 Client](http://jpillora.com/s3hook)\n\n## Browser Support\n\nAll except IE6/7 as they don't have `postMessage`\n\n[![Build Status](https://travis-ci.org/jpillora/xdomain.png)](https://travis-ci.org/jpillora/xdomain)\n\n[![Selenium Test Status](https://saucelabs.com/browser-matrix/jpillora-xdomain.svg)](https://saucelabs.com/u/jpillora-xdomain)\n\n## Quick Usage\n\n*Note: It's* **important** *to include XDomain before any other library. When XDomain loads, XHook replaces the current `window.XMLHttpRequest`. So if another library saves a reference to the original `window.XMLHttpRequest` and uses that, XHook won't be able to intercept those requests.*\n\n1. On your slave domain (`http://xyz.example.com`), create a small `proxy.html` file:\n  \n    ``` html\n    <!DOCTYPE HTML>\n    <script src=\"//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js\" master=\"http://abc.example.com\"></script>\n    ```\n\n2. Then, on your master domain (`http://abc.example.com`), point to your new `proxy.html`:\n\n    ``` html\n    <script src=\"//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js\" slave=\"http://xyz.example.com/proxy.html\"></script>\n    ```\n\n3. **And that's it!** Now, on your master domain, any XHR to `http://xyz.example.com` will automagically work: \n\n    ``` js\n    //do some vanilla XHR\n    var xhr = new XMLHttpRequest();\n    xhr.open('GET', 'http://xyz.example.com/secret/file.txt');\n    xhr.onreadystatechange = function(e) {\n      if(xhr.readyState === 4)\n        console.log(\"got result: \", xhr.responseText);\n    };\n    xhr.send();\n\n    //or if we are using jQuery...\n    $.get('http://xyz.example.com/secret/file.txt').done(function(data) {\n      console.log(\"got result: \", data);\n    });\n    ```\n\n*Tip: If you enjoy being standards compliant, you can also use `data-master` and `data-slave` attributes.*\n\n### Using multiple masters and slaves\n\n  The following two snippets are equivalent:\n\n  ``` html\n  <script src=\"//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js\" master=\"http://abc.example.com/api/*\"></script>\n  ```\n\n  ``` html\n  <script src=\"//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js\"></script>\n  <script>\n  xdomain.masters({\n    'http://abc.example.com': '/api/*'\n  });\n  </script>\n  ```\n\n  So, we can then add more `masters` or (`slaves`) by simply including them in the `object`, see API below.\n\n## API\n\n### `xdomain.slaves`(`slaves`)\n\n  Will initialize as a master\n  \n  Each of the `slaves` must be defined as: `origin`: `proxy file`\n  \n  The `slaves` object is used as a *list* slaves to force one proxy file per origin.\n\n  The **Quick Usage** step 2 above is equivalent to:\n  ```html\n  <script src=\"//cdn.rawgit.com/jpillora/xdomain/0.7.3/dist/xdomain.min.js\"></script>\n  <script>\n    xdomain.slaves({\n      \"http://xyz.example.com\": \"/proxy.html\"\n    });\n  </script>\n  ```\n\n### `xdomain.masters`(`masters`)\n\n  Will initialize as a slave\n  \n  Each of the `masters` must be defined as: `origin`: `path`\n\n  `origin` and `path` are converted to a regular expression by escaping all non-alphanumeric chars, then converting `*` into `.*` and finally wrapping it with `^` and `$`. `path` can also be a `RegExp` literal.\n  \n  Requests that do not match **both** the `origin` and the `path` regular\n  expressions will be blocked.\n\n  So you could use the following `proxy.html` to allow all subdomains of `example.com`:\n  \n  ```html\n  <script src=\"/dist/xdomain.min.js\" data-master=\"http://*.example.com/api/*.json\"></script>\n  ```\n  \n  Which is equivalent to:\n  ```html\n  <script src=\"/dist/xdomain.min.js\"></script>\n  <script>\n    xdomain.masters({\n      \"http://*.example.com\": \"/api/*.json\"\n    });\n  </script>\n  ```\n\n  Where `\"/api/*.json\"` becomes the RegExp `/^\\/api\\/.*\\.json$/`\n  \n  Therefore, you could allow ALL domains with the following `proxy.html`:\n  ```html\n  <!-- BEWARE: VERY INSECURE -->\n  <script src=\"/dist/xdomain.min.js\" master=\"*\"></script>\n  ```\n\n### `xdomain.debug` = `false`\n\n  When `true`, XDomain will log actions to console\n\n\n### `xdomain.timeout` = `15e3`ms (15 seconds)\n\n  Number of milliseconds until XDomains gives up waiting for an iframe to respond\n\n### `xdomain.on`(`event`, `handler`)\n\n  `event` may be `log`, `warn` or `timeout`. When listening for `log` and `warn` events, `handler` with contain the `message` as the first parameter. The `timeout` event fires when an iframe exeeds the `xdomain.timeout` time limit.\n\n### `xdomain.cookies`\n\n  When `withCredentials` is set to `true` for a given request, the cookies of the master and slave are sent to the server using these names. If one is set to `null`, it will not be sent.\n\n  ``` js\n  //defaults\n  xdomain.cookies = {\n    master: \"Master-Cookie\"\n    slave: \"Slave-Cookie\"\n  };\n  ```\n\n  *Note, if you use `\"Cookie\"` as your cookie name, it will be removed by browsers with `Disable 3rd Party Cookies` switched on - this includes all Safari users and many others who purposefully enable it.*\n\n## Conceptual Overview\n\n1. XDomain will create an iframe on the master to the slave's proxy.\n2. Master will communicate to slave iframe using postMessage.\n3. Slave will create XHRs on behalf of master then return the results.\n\nXHR interception is done seamlessly via [XHook](https://github.com/jpillora/xhook#overview).\n\n## Internet Explorer\n\nUse the HTML5 document type `<!DOCTYPE HTML>` to prevent your page\nfrom going into quirks mode. If you don't do this, XDomain will warn you about\nthe missing `JSON` and/or `postMessage` globals and will exit.\n\nIf you need a **CORS Polyfill** and you're here because of IE, give this XHook [CORS polyfill](http://jpillora.com/xhook/example/ie-8-9-cors-polyfill.html) a try, however, be mindful of the restrictions listed above.\n\n## FAQ / Troubleshooting\n\nQ: But I love CORS\n\nA: You shouldn't. You should use XDomain because:\n\n* IE uses a different API (XDomainRequest) for CORS, XDomain normalizes this silliness. XDomainRequest also has many restrictions:\n    * Requests must be `GET` or `POST`\n    * Requests must use the same protocol as the page `http` -> `http`\n    * Requests only emit `progress`,`timeout` and `error`\n    * Requests may only use the `Content-Type` header\n* The [CORS spec](http://www.w3.org/TR/cors/) is not as simple as it seems, XDomain allows you to use plain XHR instead.\n* On a RESTful JSON API server, CORS will generate superfluous traffic by sending a\n  preflight OPTIONS request preceding various types of requests.\n* Not everyone is able to modify HTTP headers on the server, but most can upload a `proxy.html` file.\n* Google also uses iframes as postMessage proxies instead of CORS in its Google API JS SDK:\n\n  ```html\n  <iframe name=\"oauth2relay564752183\" id=\"oauth2relay564752183\"\n  src=\"https://accounts.google.com/o/oauth2/postmessageRelay?...\"> </iframe>\n  ```\n\nQ: XDomain is interfering with another library!\n\nA: XDomain attempts to perfectly implement [XMLHttpRequest2](http://www.w3.org/TR/XMLHttpRequest2/)\nso there *should* be no differences. If there is a difference, create an issue. Note however, one purposeful\ndifference affects some libraries under IE. Many use the presence of `'withCredentials' in new XMLHttpRequest()`\nto determine if the browser supports CORS.\n\nThe most notable library that does this is jQuery, so [XHook](https://github.com/jpillora/xhook) purposefully defines `withCredentials` to trick jQuery into thinking the browser supports\nCORS, thereby allowing XDomain to function seamlessly in IE. However, this fix is detrimental to\nother libraries like: MixPanel, FB SDK, Intercom as they will incorrectly attempt CORS on domains\nwhich don't have a `proxy.html`. So, if you are using any of these libraries which implement their own CORS workarounds, you can do the\nfollowing to manually disable defining `withCredentials` and manually reenable CORS on jQuery:\n\n``` js\n//fix trackers\nxhook.addWithCredentials = false;\n//fix jquery cors\njQuery.support.cors = true;\n```\n\nNote: In newer browsers `xhook.addWithCredentials` has no effect as they already support `withCredentials`.\n\nQ: XDomain works for a few requests and then it stops.\n\nA: Most likely, the slave iframe was removed - this is often due to libraries like Turbolinks\n\nQ: In IE, I'm getting an `Access Denied` error\n\nA: This is error occurs when IE attempts a CORS request. Read on.\n\nQ: The browser is still sending CORS requests.\n\nA: Double check your slaves configuration against the examples.\nIf your slaves configuration is correct, double-check that you're\nincluding XDomain *before* `window.XMLHttpRequest` is referenced **anywhere**.\nThe safest way to fix it is to include XDomain **first**, it has no dependencies,\nit only modifies `window.XMLHttpRequest`.\n\nQ: The script is loads but the 'Quick Start' steps don't work\n\nA: XDomain only searches the script tags for `master` and `slave` attributes if they have `xdomain` in the `src`. So, if you've renamed or embedded XDomain, you'll need to use the [API](#api) in order to insert your masters and slaves.\n\nQ: It's still not working!\n\nA: Enable `xdomain.debug = true;` (or add a `debug=\"true\"` attribute to the script tag) on both the master and the slave\nand copy the `console.logs` to a new issue. If possible, please a live example demonstrating the issue.\n\n## Contributing\n\nSee [CONTRIBUTING](CONTRIBUTING.md) for instructions on how to build and run XDomain locally.\n\n#### Donate\n\nBTC 1AxEWoz121JSC3rV8e9MkaN9GAc5Jxvs4\n\n#### MIT License\n\nCopyright © 2014 Jaime Pillora &lt;dev@jpillora.com&gt;\n\nPermission is hereby granted, free of charge, to any person obtaining\na copy of this software and associated documentation files (the\n'Software'), to deal in the Software without restriction, including\nwithout limitation the rights to use, copy, modify, merge, publish,\ndistribute, sublicense, and/or sell copies of the Software, and to\npermit persons to whom the Software is furnished to do so, subject to\nthe following conditions:\n\nThe above copyright notice and this permission notice shall be\nincluded in all copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND,\nEXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\nMERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\nIN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\nCLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\nTORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\nSOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n[![Analytics](https://ga-beacon.appspot.com/UA-38709761-8/xdomain/readme)](https://github.com/igrigorik/ga-beacon)\n",
  "readmeFilename": "README.md",
  "bugs": {
    "url": "https://github.com/jpillora/xdomain/issues"
  },
  "homepage": "https://github.com/jpillora/xdomain#readme",
  "_id": "xdomain@0.7.3",
  "_shasum": "444ac77de3235e0cf55e7eab30d67d9779e38e30",
  "_resolved": "https://registry.npmjs.org/xdomain/-/xdomain-0.7.3.tgz",
  "_from": "xdomain@>=0.7.3 <0.8.0"
}
