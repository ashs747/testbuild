machine:
  python:
    version: 2.7.3
  node:
    version: 0.10.26
dependencies:
  pre:
    - pip install awscli
  post:
    - rm -r ~/.npm/cirrus
test:
  override:
    - cp app/src/localConfig.js.dist app/src/localConfig.js
    - ./node_modules/gulp/bin/gulp.js build
    - ./node_modules/karma/bin/karma start karma.conf.js --single-run
deployment:
  elasticbeanstalk:
    branch: master
    commands:
      - chmod +x ./docker/run.sh
      - ./docker/run.sh deployment $CIRCLE_SHA1
